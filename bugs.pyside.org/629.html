<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <title>Bug 629 &ndash; Certain types of QObject properties cannot be accessed from QML without being wrapped in a QVariant</title>


<link rel="Top" href="http://bugs.pyside.org/">

  


  
    <link rel="Show" title="Dependency Tree"
          href="showdependencytree.cgi?id=629&amp;hide_resolved=1">
      <link rel="Show" title="Dependency Graph"
            href="showdependencygraph.cgi?id=629">

      <link rel="Show" title="Bug Activity"
            href="show_activity.cgi?id=629">
      <link rel="Show" title="Printer-Friendly Version"
            href="show_bug.cgi?format=multiple&amp;id=629">



    
    
    <link href="skins/standard/global.css"
          rel="alternate stylesheet" 
          title="Classic"><link href="js/yui/assets/skins/sam/autocomplete.css" rel="stylesheet"
        type="text/css" ><link href="js/yui/assets/skins/sam/calendar.css" rel="stylesheet"
        type="text/css" ><link href="skins/standard/global.css" rel="stylesheet"
        type="text/css" ><link href="skins/standard/show_bug.css" rel="stylesheet"
        type="text/css" ><!--[if lte IE 7]>
      



  <link href="skins/standard/IE-fixes.css" rel="stylesheet"
        type="text/css" >
<![endif]-->

    <link href="skins/contrib/OpenBossa/global.css" rel="stylesheet"
        type="text/css" title="OpenBossa">
<link href="skins/contrib/Dusk/global.css" rel="alternate stylesheet"
        type="text/css" title="Dusk">

    

    

    
<script type="text/javascript" src="js/yui/yahoo-dom-event/yahoo-dom-event.js"></script><script type="text/javascript" src="js/yui/cookie/cookie-min.js"></script><script type="text/javascript" src="js/yui/datasource/datasource-min.js"></script><script type="text/javascript" src="js/yui/connection/connection-min.js"></script><script type="text/javascript" src="js/yui/json/json-min.js"></script><script type="text/javascript" src="js/yui/autocomplete/autocomplete-min.js"></script><script type="text/javascript" src="js/yui/calendar/calendar-min.js"></script><script type="text/javascript" src="js/global.js"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/',
                maxusermatches: 1000
            },

            string: {
                

                attach_desc_required:
                    'You must enter a Description for this attachment.',
                component_required:
                    'You must select a Component for this bug.',
                description_required:
                    'You must enter a Description for this bug.',
                short_desc_required:
                    'You must enter a Summary for this bug.',
                version_required:
                    'You must select a Version for this bug.'
            }
        };

    // -->
    </script>
<script type="text/javascript" src="js/util.js"></script><script type="text/javascript" src="js/field.js"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico" >
  </head>



  <body onload=""
        class="bugs-pyside-org bz_bug bz_status_CLOSED bz_product_PySide bz_component_QtCore bz_bug_629 yui-skin-sam">



<div id="header">
<div id="banner">
  </div>

<table border="0" cellspacing="0" cellpadding="0" id="titles">
<tr>
    <td><a id="pysidelogo" href="http://www.pyside.org">&nbsp;</a></td>
    <td id="title">
      <p>Bugzilla &ndash; Bug&nbsp;629</p>
    </td>

    <td id="subtitle">
      <p class="subheader">Certain types of QObject properties cannot be accessed from QML without being wrapped in a QVariant</p>
    </td>

    <td id="information">
      <p class="header_addl_info">Last modified: 2011-05-26 17:04:14 EEST</p>
    </td>
</tr>
</table>

<table id="lang_links_container" cellpadding="0" cellspacing="0"
       class="bz_default_hidden"><tr><td>
</td></tr></table>
<ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li></li>

  <li>
        <span class="separator">| </span>
        <a href="docs/en/html/bug_page.html" target="_blank">Help</a>
      </li>
    
      <li id="new_account_container_top">
        <span class="separator">| </span>
        <a href="createaccount.cgi">New&nbsp;Account</a>
      </li>

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <a id="login_link_top" href="http://bugs.pyside.org/show_bug.cgi?id=629&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a>
  <form action="http://bugs.pyside.org/show_bug.cgi?id=629" method="POST" 
        class="mini_login bz_default_hidden"
        id="mini_login_top"
        onsubmit="return check_mini_login_fields( '_top' );"
  >
    <input id="Bugzilla_login_top" 
           class="bz_login"
           name="Bugzilla_login"
           onfocus="mini_login_on_focus('_top')"
    >
    <input class="bz_password" 
           id="Bugzilla_password_top" 
           name="Bugzilla_password"
           type="password"
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text" 
           id="Bugzilla_password_dummy_top" value="password"
           onfocus="mini_login_on_focus('_top')"
    >
    <input type="submit" name="GoAheadAndLogIn" value="Log in" 
            id="log_in_top">
    <script type="text/javascript">
      mini_login_constants = {
          "login" : "login",
          "warning" : "You must set the login and password before logging in."
      };
      
      if (YAHOO.env.ua.gecko || YAHOO.env.ua.ie || YAHOO.env.ua.opera) {
          YAHOO.util.Event.onDOMReady(function() {
              init_mini_login_form('_top');
          });
      }
      else {
          YAHOO.util.Event.on(window, 'load', function () {
              window.setTimeout(function() {
                  init_mini_login_form('_top');
              }, 200);
          });
    }
    </script>
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>
<li id="forgot_container_top">
  <span class="separator">| </span>
  <a id="forgot_link_top" href="http://bugs.pyside.org/show_bug.cgi?id=629&amp;GoAheadAndLogIn=1#forgot"
     onclick="return show_forgot_form('_top')">Forgot Password</a>
  <form action="token.cgi" method="post" id="forgot_form_top"
        class="mini_forgot bz_default_hidden">
    <label>Login: <input type="text" name="loginname" size="20"></label>
    <input id="forgot_button_top" value="Reset Password" 
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <a href="#" onclick="return hide_forgot_form('_top')">[x]</a>
  </form>
</li>
</ul>
</div> 

<div id="bugzilla-body">
<div id="message">
<p><strong>PySide Bugzilla Closed for New Bugs</strong></p>
<p>PySide is now a Qt Add-on and uses the Qt Project's <a href="https://bugreports.qt-project.org/">JIRA Bug Tracker</a> instead of this Bugzilla instance. This Bugzilla is left for reference purposes.</p>
</div>

<div class="navigation">
  
  <i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">This bug is not in your last
    search results.</font></i>
</div>
<script type="text/javascript">
  <!--
  
  /* Outputs a link to call replyToComment(); used to reduce HTML output */
  function addReplyLink(id, real_id) {
      /* XXX this should really be updated to use the DOM Core's
       * createElement, but finding a container isn't trivial.
       */
        document.write('[<a href="#add_comment" onclick="replyToComment(' + 
                       id + ',' + real_id + '); return false;">reply<' + '/a>]');
  }

  /* Adds the reply text to the `comment' textarea */
  function replyToComment(id, real_id) {
      var prefix = "(In reply to comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);

        /* make sure we split on all newlines -- IE or Moz use \r and \n
         * respectively.
         */
        text = text.split(/\r|\n/);

        for (var i=0; i < text.length; i++) {
            replytext += "> " + text[i] + "\n"; 
        }

        replytext = prefix + replytext + "\n";


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      textarea.value += replytext;

      textarea.focus();
  }

  if (typeof Node == 'undefined') {
      /* MSIE doesn't define Node, so provide a compatibility object */
      window.Node = {
          TEXT_NODE: 3,
          ENTITY_REFERENCE_NODE: 5
      };
  }

  /* Concatenates all text from element's childNodes. This is used
   * instead of innerHTML because we want the actual text (and
   * innerText is non-standard).
   */
  function getText(element) {
      var child, text = "";
      for (var i=0; i < element.childNodes.length; i++) {
          child = element.childNodes[i];
          var type = child.nodeType;
          if (type == Node.TEXT_NODE || type == Node.ENTITY_REFERENCE_NODE) {
              text += child.nodeValue;
          } else {
              /* recurse into nodes of other types */
              text += getText(child);
          }
      }
      return text;
  }


  /* Index all classifications so we can keep track of the classification
   * for the selected product, which could control field visibility.
   */
  var all_classifications = new Array(1);
      all_classifications['PySide'] = 'Unclassified';

  //-->
  </script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2011-05-26 17:04:14">
  <input type="hidden" name="longdesclength" value="23">
  <input type="hidden" name="id" value="629">
  <input type="hidden" name="token" value="1336600361-aa8d0d19e39d3abbd1493c1a0c4527b5">
<div class="bz_alias_short_desc_container edit_form">
     <a href="show_bug.cgi?id=629"><b>Bug&nbsp;629</b></a> -<span id="summary_alias_container" class="bz_default_hidden"> 
      <span id="short_desc_nonedit_display">Certain types of QObject properties cannot be accessed from QML without being wrapped in a QVariant</span>
     </span>
  
       
    <div id="summary_alias_input">
      <table id="summary">  
        
        <tr>
          <td>
            <label accesskey="s" for="short_desc"><u>S</u>ummary</label>:
          </td>
          <td><span title="Certain types of QObject properties cannot be accessed from QML without being wrapped in a QVariant">Certain types of QObject properties cannot be accessed from QML without being...
        </span>
          </td>
        </tr>
      </table>
    </div>
  </div>
  <script type="text/javascript">
    hideAliasAndSummary('Certain types of QObject properties cannot be accessed from QML without being wrapped in a QVariant', '');
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <td class="field_label">
      <b><a href="page.cgi?id=fields.html#status">Status</a></b>:
    </td>
    <td id="bz_field_status">
      <span id="static_bug_status">CLOSED
          FIXED
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >PySide</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=PySide"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >QtCore</td>
    </tr>
    <tr>
      <td class="field_label">
        <label for="version"><b>Version</b></label>:
      </td>
<td>1.0.0 beta4
  </td>
    </tr>
        
    
        
    <tr>
      <td class="field_label">
        <label for="rep_platform" accesskey="h"><b>Platform</b></label>:
      </td>
      <td class="field_value">All
       All
       <script type="text/javascript">
         assignToDefaultOnChange(['product', 'component']);
       </script>
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <td class="field_label">
        <label for="priority" accesskey="i">
          <b><a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></b></label>:
      </td>
      <td>P4
       normal
      </td>
    </tr>            
          
          <tr>
      <td class="field_label">
        <b><a href="page.cgi?id=fields.html#assigned_to">Assigned To</a></b>:
      </td>
      <td><span class="vcard"><span class="fn">renato filho</span>
</span>
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr>
    <td class="field_label">
      <label for="bug_file_loc" accesskey="u"><b>
          <u>U</u>RL</b></label>:
    </td>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr><th class="field_label">
    <label for="dependson">Depends&nbsp;on</label>:
  </th>
  <td>    
    <span id="dependson_input_area">
    </span>
    
  </td>
  </tr>
  
  <tr><th class="field_label">
    <label for="blocked" accesskey="b"><u>B</u>locks</label>:
  </th>
  <td>    
    <span id="blocked_input_area">
    </span>
    
  </td>
  
  <tr>
    <th>&nbsp;</th>
  
    <td colspan="2" align="left" id="show_dependency_tree_or_graph">
      Show dependency <a href="showdependencytree.cgi?id=629&amp;hide_resolved=1">tree</a>
  
        /&nbsp;<a href="showdependencygraph.cgi?id=629">graph</a>
    </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table cellpadding="3" cellspacing="1">
        <tr>
    <td class="field_label">
      <b>Reported</b>:
    </td>
    <td>2011-01-20 06:44 EET by <span class="vcard"><span class="fn">Matti Airas</span>
</span>
    </td>
  </tr>
  
  <tr>
    <td class="field_label">
      <b> Modified</b>:
    </td>
    <td>2011-05-26 17:04 EEST 
      (<a href="show_activity.cgi?id=629">History</a>)
    </td>
  
  </tr>
         <tr>
      <td class="field_label">
        <label for="newcc" accesskey="a"><b>CC List</b>:</label>
      </td>
      <td>11 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" name="cc" multiple="multiple" size="5">
                <option value="aidanok">aidanok</option>
                <option value="bruno.araujo">bruno.araujo</option>
                <option value="donaggio">donaggio</option>
                <option value="hugo.lima">hugo.lima</option>
                <option value="lauro.neto">lauro.neto</option>
                <option value="luciano.wolf">luciano.wolf</option>
                <option value="m">m</option>
                <option value="marcelo.lira">marcelo.lira</option>
                <option value="matti.p.airas">matti.p.airas</option>
                <option value="renatox">renatox</option>
                <option value="willer.moreira">willer.moreira</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with a comma. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ></td>
    </tr> 
         
         <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
         
                

        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts" cellspacing="0" cellpadding="0"><tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
    }
    else {
        link.innerHTML = "Hide Obsolete";
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table" cellspacing="0" cellpadding="4">
  <tr id="a0">
    <th colspan="2" align="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_application_zip bz_tr_obsolete bz_default_hidden">
        <td valign="top">
            <a href="attachment.cgi?id=231"
               title="View the content of the attachment">
          <b><span class="bz_obsolete">Test case, which shows both python lists and QAbstractLists cannot be read from a QObject property</span></b></a>

          <span class="bz_attach_extra_info">
              (1.38 KB,
                application/zip)

            <br>
            <a href="#attach_231"
               title="Go to the comment associated with the attachment">2011-01-20 14:56 EET</a>,
<span class="vcard"><span class="fn">Aidan OK</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=231&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_application_x-zip-compressed">
        <td valign="top">
            <a href="attachment.cgi?id=269"
               title="View the content of the attachment">
          <b>Much cleaner demonstration of the bug.</b></a>

          <span class="bz_attach_extra_info">
              (787 bytes,
                application/x-zip-compressed)

            <br>
            <a href="#attach_269"
               title="Go to the comment associated with the attachment">2011-02-18 15:15 EET</a>,
<span class="vcard"><span class="fn">Aidan OK</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=269&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a3" class="bz_contenttype_text_x-python">
        <td valign="top">
            <a href="attachment.cgi?id=323"
               title="View the content of the attachment">
          <b>test updated</b></a>

          <span class="bz_attach_extra_info">
              (1.95 KB,
                text/x-python)

            <br>
            <a href="#attach_323"
               title="Go to the comment associated with the attachment">2011-05-09 17:19 EEST</a>,
<span class="vcard"><span class="fn">renato filho</span>
</span>
          </span>
        </td>


        <td valign="top">
          <a href="attachment.cgi?id=323&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="2">
        <span class="bz_attach_view_hide">
            <a href="#a0" onclick="return toggle_display(this);">Show
              Obsolete</a> (1)
        </span>
        <a href="attachment.cgi?bugid=629&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table><tr><td><fieldset>
        <legend>Note</legend>
        You need to
        <a href="show_bug.cgi?id=629&amp;GoAheadAndLogIn=1">log in</a>
         before you can comment on or make changes to this bug.
      </fieldset></table><tr></td>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="js/comments.js" type="text/javascript">
</script>







<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table" cellpadding="0" cellspacing="0"><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c0">Description</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Matti Airas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-01-20 06:44:42 EET
        </span>
      </div>



<pre class="bz_comment_text" >From: Aidan O'Kelly &lt;aidanok&#64;gmail.com&gt;
Subject: [PySide] (QML) setContextProperty() handles types that   
QtCore.Property doesn't..
Date: Wed, 19 Jan 2011 22:56:40 +0000

If we try to use a QObject property of type 'QAbstractListModel' from
QML, (we are using it as a model on a ListView or similar)
- MetaProperty::read: Unable to handle unregistered datatype
'QAbstractListModel*' for property 'TestItem::alist'

If we set the same object as a property of the context
(view-&gt;rootContext()-&gt;setContextProperty() ), it works as expected.

I think we need to register the QAbstractItemModel type with the
MetaType system, using  qRegisterMetaType&lt;&gt;() .. Is there a place we
can do this in PySide?</pre>
    </div>
  <div id="c1" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Matti Airas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-01-20 06:46:33 EET
        </span>
      </div>



<pre class="bz_comment_text" >I'm prioritizing this P4 for now - while I agree with the importance of this
issue, this might be non-trivial to do and it might be better to postpone it
after the 1.0 release. ... but I'm open for discussion about this. :-)</pre>
    </div>
  <div id="c2" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Hugo Parente Lima</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-01-20 13:14:59 EET
        </span>
      </div>



<pre class="bz_comment_text" >Do you have some test code to show us the issue?</pre>
    </div>
  <div id="c3" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Aidan OK</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-01-20 14:56:23 EET
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class="bz_obsolete"><a href="attachment.cgi?id=231" name="attach_231" title="Test case, which shows both python lists and QAbstractLists cannot be read from a QObject property">attachment 231</a> <a href="attachment.cgi?id=231&amp;action=edit" title="Test case, which shows both python lists and QAbstractLists cannot be read from a QObject property">[details]</a></span>
Test case, which shows both python lists and QAbstractLists cannot be read from
a QObject property

There is a test-case attached which shows the issue. 

It seems that python lists/dicts also suffer this problem. They work fine if
you set them as a contextProperty, but not as a QObject property. See the
test-case for example. 

As I mentioned on the mailing list, I tried the same setup in C++ (QObject with
QAbstractListModel as a property) and it would not work, even after correctly
registering the QAbstractListModel type with Q_DECLARE_METATYPE and
qRegisterMetaType.</pre>
    </div>
  <div id="c4" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Aidan OK</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-01-20 15:47:28 EET
        </span>
      </div>



<pre class="bz_comment_text" >Even more info:

Actually, this DOES work in C++ , and without needing to register any new types
with the MetaType system. It's enough to return your AbstractList, cast to a
QObject*, wrapped in a QVariant:

return QVariant::fromValue((QObject*) _list); // _list is QAbstractListModel*

QML can then access this property and use it as model. 

fwiw... PyQt has the exact same behavior, but you can work around it in the
python list case by declaring your QObject property as type QVariant. This
doesn't seem to work in the AbstractList case.</pre>
    </div>
  <div id="c5" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Aidan OK</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-01-20 16:09:19 EET
        </span>
      </div>



<pre class="bz_comment_text" >Apologies for the unorganized nature of the info, but I should add: 

In fact the PyQt workaround (setting Property type to QVariant) DOES work with
Abstract*Models, as long as you keep the reference around :)

So it seems we just need to be able to wrap objects in QVariants when returning
them from QObject properties, either automatically or explicitly.</pre>
    </div>
  <div id="c6" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Matti Airas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-01-24 10:18:16 EET
        </span>
      </div>



<pre class="bz_comment_text" >Now prioritizing P4 (as told I would do - just forgot earlier).

Aidan, thanks for all the analysis - it'll become useful when we get to fixing
this one. And don't worry about the organization. :-)</pre>
    </div>
  <div id="c7" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Aidan OK</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-02-10 12:12:28 EET
        </span>
      </div>



<pre class="bz_comment_text" >No probs, but this bug should be renamed or split into two, as the problem
described is not fixed by using qRegisterMetaType, that was just my initial
assumption.

A more accurate title might be.. 'Certain types of QObject properties cannot be
accessed from QML without being wrapped in a QVariant'  

This might be a bug in Qt rather than PySide, as having to do those ugly casts
in C++ to get it to work, is surely not right.</pre>
    </div>
  <div id="c8" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Aidan OK</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-02-18 15:15:15 EET
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=269" name="attach_269" title="Much cleaner demonstration of the bug.">attachment 269</a> <a href="attachment.cgi?id=269&amp;action=edit" title="Much cleaner demonstration of the bug.">[details]</a></span>
Much cleaner demonstration of the bug.

Just another example, much cleaner.

You can see how QObject properties are handled differently than properties set
with setContextProperty</pre>
    </div>
  <div id="c9" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Matti Airas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-03-31 11:40:16 EEST
        </span>
      </div>



<pre class="bz_comment_text" >This was deprioritized to P4 because the bug was regarded as post-1.0 material.
Now that 1.0 has been published for one month already, I'd like to see this
bumped to P3.</pre>
    </div>
  <div id="c10" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Hugo Parente Lima</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-03-31 15:41:09 EEST
        </span>
      </div>



<pre class="bz_comment_text" >I don't know if it's possible to implement this function without hacks like the
ones we did on qmlRegisterType, because qRegisterType binds a name to a C++
symbol, if you use two names for just one symbol qRegisterType will think that
this is just a alias. The problem is that we can't create C++ symbols at
runtime.

Another point is that qRegisterType is not needed in PySide, in C++ it's used
when you want to use a type onto queued signals, but you don't need to do this
on PySide to use your type on whatever signal connection you want to.

Other use of qRegisterType on C++ is when you need to put your type inside a
QVariant, you also don't need to do this on PySide.

So IMO this bug should be marked as WONTFIX unless someone came with a
reasonable use case for this function on PySide.</pre>
    </div>
  <div id="c11" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Matti Airas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-03-31 16:18:39 EEST
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=629#c10">comment #10</a>)
<span class="quote">&gt; I don't know if it's possible to implement this function without hacks like the
&gt; ones we did on qmlRegisterType, because qRegisterType binds a name to a C++
&gt; symbol, if you use two names for just one symbol qRegisterType will think that
&gt; this is just a alias. The problem is that we can't create C++ symbols at
&gt; runtime.
&gt; 
&gt; Another point is that qRegisterType is not needed in PySide, in C++ it's used
&gt; when you want to use a type onto queued signals, but you don't need to do this
&gt; on PySide to use your type on whatever signal connection you want to.
&gt; 
&gt; Other use of qRegisterType on C++ is when you need to put your type inside a
&gt; QVariant, you also don't need to do this on PySide.
&gt; 
&gt; So IMO this bug should be marked as WONTFIX unless someone came with a
&gt; reasonable use case for this function on PySide.</span >

OK - given your reasoning, I'm of course fine with WONTFIX as well.</pre>
    </div>
  <div id="c12" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Hugo Parente Lima</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-03-31 21:21:23 EEST
        </span>
      </div>



<pre class="bz_comment_text" >So marking it as WONTFIX :-)</pre>
    </div>
  <div id="c13" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Luca Donaggio</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-04-01 11:25:57 EEST
        </span>
      </div>



<pre class="bz_comment_text" >If this is a WONTFIX, what about this bug's test case? Would we ever be able to
access python lists from a QObject property in QML?</pre>
    </div>
  <div id="c14" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Matti Airas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-04-01 11:37:29 EEST
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=629#c13">comment #13</a>)
<span class="quote">&gt; If this is a WONTFIX, what about this bug's test case? Would we ever be able to
&gt; access python lists from a QObject property in QML?</span >

Luca, a good point - actually it might be better to reopen and rename the bug
according to Aidan's proposal in <a href="show_bug.cgi?id=629#c7">comment 7</a>... Doing that.</pre>
    </div>
  <div id="c15" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">renato filho</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-04-01 14:40:17 EEST
        </span>
      </div>



<pre class="bz_comment_text" >I do not agree with mark this bug as wontfix, I think we need keep this bug
open.
First because someone can try use and report a new one.
Second because this is a missing feature and we do not have 100% about the
possibility of implement this, we need study more the QML core code, before
give a final answer.</pre>
    </div>
  <div id="c16" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Hugo Parente Lima</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-04-05 16:26:40 EEST
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=629#c13">comment #13</a>)
<span class="quote">&gt; If this is a WONTFIX, what about this bug's test case? Would we ever be able to
&gt; access python lists from a QObject property in QML?</span >

Yes, we would, but qRegisterType isn't related to this.

I still thinking the same way, there's no use case yet for Python version of
qRegisterType.</pre>
    </div>
  <div id="c17" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Hugo Parente Lima</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-04-05 16:38:30 EEST
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=629#c15">comment #15</a>)
<span class="quote">&gt; I do not agree with mark this bug as wontfix, I think we need keep this bug
&gt; open.
&gt; First because someone can try use and report a new one.</span >

No, if we start thinking this way we need to keep ALL bugs always open because
if a regression occur and someone try to open a new bug...

<span class="quote">&gt; Second because this is a missing feature and we do not have 100% about the
&gt; possibility of implement this, we need study more the QML core code, before
&gt; give a final answer.</span >

It's not a missing feature, it's a unneeded feature and IMO it's not related to
QML, this is qRegisterType not qmlRegisterType, PyObject is already an type
registered on Qt metatype system by PySide, so this isn't the deal.

The problem is that at the moment we don't known how to tell QML to convert a
Python list onto a JavaScript list, just this.

If the scope of this bug is what the title suggest &quot;Certain types of QObject
properties cannot be accessed from QML&quot; rather than implement qRegisterType,
I'm fine.</pre>
    </div>
  <div id="c18" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">Matti Airas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-04-06 09:33:55 EEST
        </span>
      </div>



<pre class="bz_comment_text" >(In reply to <a href="show_bug.cgi?id=629#c17">comment #17</a>)

<span class="quote">&gt; If the scope of this bug is what the title suggest &quot;Certain types of QObject
&gt; properties cannot be accessed from QML&quot; rather than implement qRegisterType,
&gt; I'm fine.</span >

Yes, that was my idea when I reopened the bug.</pre>
    </div>
  <div id="c19" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">renato filho</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-05-09 17:18:59 EEST
        </span>
      </div>



<pre class="bz_comment_text" >Ok, Now I understand the problem  and I have a solution and a good explanation
for that.

First: For declare properties types with C++ types you can use string to
describe your type.

p1 = Property(&quot;Qvariant&quot;, getP1)

This will allow you declare properties with QVariant type.


Second: If you will use the properties inside on QML code return types witch
the QML can handle. Do not use python types (&quot;list, dict, object&quot;) these types
will be wrapped to a PyThonType object which is unknown by QML. 


Third: If you return new QObject make sure that QQboject will exists as long as
necessary(keep a reference on pyside, or set some parent object for that),
otherwise pyside will destroy that and c++ will crash.

With that in mind you can fix you example to work as you like.

I will upload the code based on these facts for you check. Give me some reply 
about that, and feel free to give new ideas or complains, or please mark the
bug as closed if you fell satisfied with that explanation.</pre>
    </div>
  <div id="c20" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">renato filho</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-05-09 17:19:31 EEST
        </span>
      </div>



<pre class="bz_comment_text" >Created <span class=""><a href="attachment.cgi?id=323" name="attach_323" title="test updated">attachment 323</a> <a href="attachment.cgi?id=323&amp;action=edit" title="test updated">[details]</a></span>
test updated</pre>
    </div>
  <div id="c21" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">renato filho</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-05-24 00:36:14 EEST
        </span>
      </div>



<pre class="bz_comment_text" >Ok, I will close this bug since the problem was solved.</pre>
    </div>
  <div id="c22" class="bz_comment">

      <div class="bz_comment_head">



        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=629#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user"><span class="vcard"><span class="fn">renato filho</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2011-05-26 17:04:14 EEST
        </span>
      </div>



<pre class="bz_comment_text" >PySide release 1.0.3</pre>
    </div>
  


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=629">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=629">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=629">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>        


<div class="navigation">
  
  <i><font color="#777777">First</font></i>
  <i><font color="#777777">Last</font></i>
  <i><font color="#777777">Prev</font></i>
  <i><font color="#777777">Next</font></i>
  &nbsp;&nbsp;
  <i><font color="#777777">This bug is not in your last
    search results.</font></i>
</div>

<br>
</div>



<div id="footer">
  <div class="intro"></div>




<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li></li>

  <li>
        <span class="separator">| </span>
        <a href="docs/en/html/bug_page.html" target="_blank">Help</a>
      </li>
    
      <li id="new_account_container_bottom">
        <span class="separator">| </span>
        <a href="createaccount.cgi">New&nbsp;Account</a>
      </li>

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <a id="login_link_bottom" href="http://bugs.pyside.org/show_bug.cgi?id=629&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a>
  <form action="http://bugs.pyside.org/show_bug.cgi?id=629" method="POST" 
        class="mini_login bz_default_hidden"
        id="mini_login_bottom"
        onsubmit="return check_mini_login_fields( '_bottom' );"
  >
    <input id="Bugzilla_login_bottom" 
           class="bz_login"
           name="Bugzilla_login"
           onfocus="mini_login_on_focus('_bottom')"
    >
    <input class="bz_password" 
           id="Bugzilla_password_bottom" 
           name="Bugzilla_password"
           type="password"
    >
    <input class="bz_password bz_default_hidden bz_mini_login_help" type="text" 
           id="Bugzilla_password_dummy_bottom" value="password"
           onfocus="mini_login_on_focus('_bottom')"
    >
    <input type="submit" name="GoAheadAndLogIn" value="Log in" 
            id="log_in_bottom">
    <script type="text/javascript">
      mini_login_constants = {
          "login" : "login",
          "warning" : "You must set the login and password before logging in."
      };
      
      if (YAHOO.env.ua.gecko || YAHOO.env.ua.ie || YAHOO.env.ua.opera) {
          YAHOO.util.Event.onDOMReady(function() {
              init_mini_login_form('_bottom');
          });
      }
      else {
          YAHOO.util.Event.on(window, 'load', function () {
              window.setTimeout(function() {
                  init_mini_login_form('_bottom');
              }, 200);
          });
    }
    </script>
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>
<li id="forgot_container_bottom">
  <span class="separator">| </span>
  <a id="forgot_link_bottom" href="http://bugs.pyside.org/show_bug.cgi?id=629&amp;GoAheadAndLogIn=1#forgot"
     onclick="return show_forgot_form('_bottom')">Forgot Password</a>
  <form action="token.cgi" method="post" id="forgot_form_bottom"
        class="mini_forgot bz_default_hidden">
    <label>Login: <input type="text" name="loginname" size="20"></label>
    <input id="forgot_button_bottom" value="Reset Password" 
           type="submit">
    <input type="hidden" name="a" value="reqpw">
    <a href="#" onclick="return hide_forgot_form('_bottom')">[x]</a>
  </form>
</li>
</ul>
  </li>

  
    

  


  
</ul>

  <div class="outro"></div>
</div>


</body>
</html>